# ЁЯНЬ Lab 4.2 тАУ Food API

## ЁЯОп р╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕в
р╕кр╕гр╣Йр╕▓р╕З RESTful API р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕▓р╕вр╕Бр╕▓р╕гр╕нр╕▓р╕лр╕▓р╕г р╣Вр╕Фр╕вр╕кр╕▓р╕бр╕▓р╕гр╕Ц  
- р╣Бр╕кр╕Фр╕З / р╕Др╣Йр╕Щр╕лр╕▓ / р╕Бр╕гр╕нр╕З / р╣Ар╕гр╕╡р╕вр╕Зр╕ер╕│р╕Фр╕▒р╕Ъ / р╣Бр╕Ър╣Ир╕Зр╕лр╕Щр╣Йр╕▓  
- р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕нр╕▓р╕лр╕▓р╕гр╕гр╕▓р╕вр╕гр╕▓р╕вр╕Бр╕▓р╕г  
- р╕Фр╕╢р╕Зр╕нр╕▓р╕лр╕▓р╕гр╕Хр╕▓р╕бр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И  
- р╕кр╕╕р╣Ир╕бр╕нр╕▓р╕лр╕▓р╕гр╣Бр╕Ър╕Ъ random  
- р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕┤р╕Хр╕┤р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕▓р╕лр╕▓р╕г  
- р╕Юр╕гр╣Йр╕нр╕бр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ъ HTML р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕Фр╕кр╕нр╕Ъ API  

---

## ЁЯУБ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М
lab-4-2-food-api/
тФЬтФАтФА package.json
тФЬтФАтФА README.md
тФЬтФАтФА server.js
тФЬтФАтФА middleware/
тФВ тФФтФАтФА logger.js
тФЬтФАтФА routes/
тФВ тФФтФАтФА foods.js
тФЬтФАтФА data/
тФВ тФФтФАтФА foods.json
тФФтФАтФА public/
тФФтФАтФА index.html


---

## тЪЩя╕П р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╕░р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
```bash
npm install
npm run start   # р╕лр╕гр╕╖р╕н npm run dev (р╕Цр╣Йр╕▓р╕бр╕╡ nodemon)
р╣Ар╕Ыр╕┤р╕Фр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Чр╕╡р╣И:
ЁЯСЙ http://localhost:3000

ЁЯзй Endpoints р╕лр╕ер╕▒р╕Б
1. /api/foods тАУ р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕нр╕▓р╕лр╕▓р╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
р╕гр╕нр╕Зр╕гр╕▒р╕Ъ query parameters р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Др╣Йр╕Щр╕лр╕▓ / р╕Бр╕гр╕нр╕З / р╣Ар╕гр╕╡р╕вр╕Зр╕ер╕│р╕Фр╕▒р╕Ъ / р╣Бр╕Ър╣Ир╕Зр╕лр╕Щр╣Йр╕▓

р╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣М	р╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕в	р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З
search	р╕Др╣Йр╕Щр╕лр╕▓р╕Ир╕▓р╕Бр╕Кр╕╖р╣Ир╕нр╕лр╕гр╕╖р╕нр╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕в	?search=р╕Ьр╕▒р╕Ф
category	р╕Бр╕гр╕нр╕Зр╕Хр╕▓р╕бр╕Ыр╕гр╕░р╣Ар╕ар╕Ч	?category=dessert
vegetarian	р╕нр╕▓р╕лр╕▓р╕гр╕бр╕▒р╕Зр╕кр╕зр╕┤р╕гр╕▒р╕Хр╕┤ true / false	?vegetarian=true
available	р╕Бр╕гр╕нр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕нр╕▓р╕лр╕▓р╕гр╕Чр╕╡р╣Ир╕Юр╕гр╣Йр╕нр╕бр╣Ар╕кр╕┤р╕гр╣Мр╕Я	?available=true
minPrice	р╕гр╕▓р╕Др╕▓р╕Хр╣Ир╕│р╕кр╕╕р╕Ф	?minPrice=40
maxPrice	р╕гр╕▓р╕Др╕▓р╕кр╕╣р╕Зр╕кр╕╕р╕Ф	?maxPrice=100
maxSpicy	р╕Др╕зр╕▓р╕бр╣Ар╕Ьр╣Зр╕Фр╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ (0тАУ5)	?maxSpicy=2
sort	р╣Ар╕гр╕╡р╕вр╕Зр╕ер╕│р╕Фр╕▒р╕Ъ: name, price, spicy	?sort=price
order	р╕ер╕│р╕Фр╕▒р╕Ъ asc / desc	?order=desc
page	р╕лр╕Щр╣Йр╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Чр╕╡р╣И 1	?page=2
limit	р╕Ир╕│р╕Щр╕зр╕Щр╕Хр╣Ир╕нр╕лр╕Щр╣Йр╕▓ (р╕кр╕╣р╕Зр╕кр╕╕р╕Ф 100)	?limit=5

ЁЯзк р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З

bash
р╕Др╕▒р╕Фр╕ер╕нр╕Бр╣Вр╕Др╣Йр╕Ф
/api/foods?category=dessert&maxPrice=80&sort=price&order=asc
/api/foods?vegetarian=true&page=2&limit=5
/api/foods?minPrice=40&maxPrice=80&sort=spicy&order=desc
2. /api/foods/:id
р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕нр╕▓р╕лр╕▓р╕гр╕Хр╕▓р╕б id
р╣Ар╕Кр╣Ир╕Щ: /api/foods/1

3. /api/foods/category/:category
р╕Фр╕╣р╕нр╕▓р╕лр╕▓р╕гр╣Ар╕Йр╕Юр╕▓р╕░р╕лр╕бр╕зр╕Ф р╣Ар╕Кр╣Ир╕Щ
/api/foods/category/drink

4. /api/foods/random
р╕Фр╕╢р╕Зр╕нр╕▓р╕лр╕▓р╕гр╣Бр╕Ър╕Ър╕кр╕╕р╣Ир╕б 1 р╕гр╕▓р╕вр╕Бр╕▓р╕г
р╕гр╕нр╕Зр╕гр╕▒р╕Ъ ?category= р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕╕р╣Ир╕бр╣Гр╕Щр╕лр╕бр╕зр╕Фр╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щ
р╣Ар╕Кр╣Ир╕Щ: /api/foods/random?category=main

ЁЯУК /api/stats
р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕┤р╕Хр╕┤р╣Вр╕Фр╕вр╕гр╕зр╕бр╕Вр╕нр╕Зр╣Ар╕бр╕Щр╕╣р╕нр╕▓р╕лр╕▓р╕г

Response р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З

json
р╕Др╕▒р╕Фр╕ер╕нр╕Бр╣Вр╕Др╣Йр╕Ф
{
  "total": 10,
  "byCategory": { "main": 3, "dessert": 2, "drink": 2 },
  "vegetarian": { "true": 5, "false": 5 },
  "price": { "min": 35, "max": 110, "avg": 70.4 },
  "bySpicyLevel": { "0": 4, "2": 3, "3": 1 },
  "lastUpdated": "2025-10-08T12:30:00.000Z"
}
ЁЯУЦ /api/docs
р╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Бр╕Щр╕░р╕Щр╕│р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ API р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (auto-generated)
р╣Ар╕Ыр╕┤р╕Фр╕Фр╕╣р╣Др╕Фр╣Йр╕Чр╕╡р╣И:
ЁЯСЙ http://localhost:3000/api/docs

ЁЯза /health
р╣Ар╕Кр╣Зр╕Др╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М
Response: { "status": "ok" }

ЁЯз░ Middleware
middleware/logger.js
р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Чр╕╕р╕Б request р╕Чр╕╡р╣Ир╣Ар╕Вр╣Йр╕▓р╕бр╕▓ р╣Ар╕Кр╣Ир╕Щ:

sql
р╕Др╕▒р╕Фр╕ер╕нр╕Бр╣Вр╕Др╣Йр╕Ф
GET /api/foods?search=р╕Ьр╕▒р╕Ф -> 200 (15ms)
ЁЯзк р╕лр╕Щр╣Йр╕▓ HTML р╕Чр╕Фр╕кр╕нр╕Ъ
р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓ http://localhost:3000/ р╣Ар╕Юр╕╖р╣Ир╕нр╕Бр╕гр╕нр╕Бр╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣Мр╣Бр╕ер╕░ Fetch р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡

р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╣Гр╕Щр╕гр╕╣р╕Ы JSON р╕Ър╕Щр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ъ

ЁЯз╛ р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Фр╣Йр╕зр╕в curl
bash
р╕Др╕▒р╕Фр╕ер╕нр╕Бр╣Вр╕Др╣Йр╕Ф
# 1. р╕Чр╕Фр╕кр╕нр╕Ър╕Др╣Йр╕Щр╕лр╕▓
curl "http://localhost:3000/api/foods?search=р╕Ьр╕▒р╕Ф"

# 2. р╕Бр╕гр╕нр╕Зр╕Хр╕▓р╕бр╕лр╕бр╕зр╕Ф
curl "http://localhost:3000/api/foods?category=dessert"

# 3. р╕кр╕╕р╣Ир╕бр╣Ар╕бр╕Щр╕╣
curl "http://localhost:3000/api/foods/random"

# 4. р╕Фр╕╣р╕кр╕Цр╕┤р╕Хр╕┤
curl "http://localhost:3000/api/stats"
тЬЕ р╣Ар╕Бр╕Ур╕Ср╣Мр╕Бр╕▓р╕гр╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щ (30%)
р╕лр╕▒р╕зр╕Вр╣Йр╕н	р╕кр╕Цр╕▓р╕Щр╕░
Filtering р╕Чр╕│р╕Зр╕▓р╕Щр╕Др╕гр╕Ър╕Чр╕╕р╕Бр╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣М	тЬЕ
Logger р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е request	тЬЕ
Routes р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Чр╕│р╕Зр╕▓р╕Щр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З (/:id, /category/:category, /random)	тЬЕ
/api/docs р╣Бр╕ер╕░ /api/stats р╕Др╕гр╕Ър╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М	тЬЕ
HTML demo page р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Й	тЬЕ
README р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ	тЬЕ

ЁЯПБ р╕кр╕гр╕╕р╕Ы
Food API р╕Щр╕╡р╣Йр╕Юр╕гр╣Йр╕нр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕Щ Postman / Browser / HTML page
р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Йр╣Ар╕Ыр╣Зр╕Щр╕Хр╣Йр╕Щр╣Бр╕Ър╕Ър╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З RESTful API р╣Ар╕Ър╕╖р╣Йр╕нр╕Зр╕Хр╣Йр╕Щ
р╕Фр╣Йр╕зр╕в Express.js + Node.js р╕нр╕вр╣Ир╕▓р╕Зр╕Цр╕╣р╕Бр╕лр╕ер╕▒р╕Бр╣Бр╕ер╕░р╕бр╕╡р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ ЁЯТк
